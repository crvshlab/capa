#!/usr/bin/env ruby

require_relative '../lib/capa'

def command?(command)
  system("which #{command} > /dev/null 2>&1")
end

abort('Please install gifify: https://github.com/vvo/gifify') unless command?('gifify')

recorder = SimulatorRecorder.new(filename: @video_filename)

Signal.trap("SIGINT") do
  generator = GIFGenerator.new(input_video: @video_filename, output_gif: "#{@video_filename}.gif")
  generator.generate
end


recorder.record